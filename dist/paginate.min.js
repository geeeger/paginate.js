!function(e,t){"function"==typeof define&&define.amd?define([],t):e.Paginate=t()}(this,function(){var e={ctn:["{{if prev}}",'<div class="btn-prev{{page_count <= page_size ? " hideBtn" : ""}}">{{prev_text}}</div>',"{{/if}}",'<div class="page-box">','<ul class="main-page-list">',"{{each data as item i}}",'<li class="page" data-page="{{item.page}}">{{item.page}}</li>',"{{/each}}","{{if redirect}}",'<li class="redirect">','<input type="text" class="input">','<span class="btn">{{redirect_text}}</span>',"</li>","{{/if}}","</ul>","</div>","{{if next}}",'<div class="btn-next{{page_count <= page_size ? " hideBtn" : ""}}">{{next_text}}</div>',"{{/if}}"].join("")},t={}.toString,n=function(e){return function(n){return"[object "+e+"]"===t.call(n)}},i=function(e,t){for(var n=0,i=e.length;n<i;n++)t(e[n],n,e)},r={};r.brackets="{{ }}";var a=function(e){return'"'+e.replace(/("|'|\\)/g,"\\$1")+'"'},c=function(e){var t=e.split(" "),n=t[0],r="";switch(n){case"if":r="(function (){return !me."+t[1]+'?"":""';break;case"/if":r='""})()';break;case"each":var a=i.toString(),c=t[3]?t[3]:"$value";r="(function (){var each="+a+';var r="";each(me.'+t[1]+",function ($v,$i){r+=(function (){me."+c+'=$v;return ""';break;case"/each":r='""})()});return r;})()';break;default:var s=e.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,"").split(/[^\$\w\d]+/),o="",u=0;i(s,function(t){t&&(u=e.indexOf(t)+t.length,o+=e.substr(0,u).replace(t,"me."+t))}),o+=e.substr(u),r="(function (){return "+o+"})()"}return r};r.render=function(e,t){var n=r.brackets.split(" "),s=n[0],o=n[1],u=[];return i(e.split(s),function(e){e=e.split(o);var t=e[0],n=e[1];1===e.length?u.push(a(e[0])):(u.push(c(t)),n&&u.push(a(n)))}),u="return "+u.join("+"),new Function("me",u)};var s=n("Object"),o=n("String"),u=Array.prototype.slice,g=function(){},f=function(e,t,n){var i=e.onclick,r=n;e.onclick=function(e){var n=p(e);t.call(r,n)!==!1&&i.call(r,n)}},p=function(e){var t=e||window.event;if(t.target)return t;var n={};for(var i in t)n[i]=t[i];return n.target=t.srcElement||document,n.preventDefault=function(){t.returnValue=!1},n.stopPropagation=function(){t.cancelBubble=!1},n},l=String.prototype.trim,d=function(){return l?function(e){return l.call(e)}:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}}(),v=document.createElement("a"),h=function(){return v.classList?function(e,t){return e.classList.contains(t)}:function(e,t){return el.className.match(new RegExp("(\\s|^)("+t+")(\\s|$)"))}}(),_=function(){return v.classList?function(e,t){e&&t&&!h(e,t)&&e.classList.add(t)}:function(e,t){e&&t&&!h(e,t)&&(e.className+=d(e.className)+" "+t)}}(),m=function(){return v.classList?function(e,t){e&&t&&h(e,t)&&e.classList.remove(t)}:function(e,t){e&&t&&h(e,t)&&(el.className=el.className.replace(RegExp("(\\s|^)("+cls+")(\\s|$)"),"$3"))}}(),b=function(){for(var e=u.call(arguments,1),t=arguments[0],n=0,i=e.length;n<i;n++){var r=e[n];for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a])}return t},x=function(e){if(!e)throw new Error("missing params, options is required");if(!e.container)throw new Error("missing params, container is required");if(!e.page_count)throw new Error("missing params, page_count is required");this.$con=e.container,this.page=1,this.default={page_size:5,prev:!0,next:!0,redirect:!1,redirect_text:"go",prev_text:"",next_text:"",page_count:0},this.options=this.config(e),this.init()};return x.prototype={constructor:x,init:function(){this._cbs={},this.initEvt(),this.render(1,1+this.config("page_size"))},on:function(e,t){this._cbs[e]=t},off:function(e){e?delete this._cbs[e]:this._cbs={}},fire:function(e){var t=u.call(arguments),e=t[0],n=t.slice(1);return this._cbs[e]?this._cbs[e].apply(e,n):void 0},config:function(e,t){if(s(e))return b({},this.default,e);if(o(e)){if(void 0===t)return this.options[e];this.options[e]=t}},initEvt:function(){var e=this,t=e.handler;e.$con.onclick=g,f(e.$con,function(n){var i=n.target.className||"";switch(i=i.split(" ")[0]){case"btn-next":t.next.call(e);break;case"btn-prev":t.prev.call(e);break;case"page":t.page.call(e,n);break;case"btn":t.redirect.call(e,n,n.target)}},e),e.$con.onkeyup=function(n){13===p(n).keyCode&&t.redirect.call(e,evt,n.target)}},destory:function(){this.$con.onclick=null,this.$con.onkeyup=null,this.options=null,this._cbs={},this.$con.innerHTML="",this.$con=null},_make:function(e,t){var n=[];e<1&&(e=1,t=e+this.config("page_size")),t>this.config("page_count")&&(t=this.config("page_count")+1);for(var i=e;i<t;i++)n.push({page:i});return n},render:function(t,n,i,a){var c=this,s=r.render(e.ctn),o={data:c._make(t,n),next:c.config("next"),prev:c.config("prev"),prev_text:c.config("prev_text"),next_text:c.config("next_text"),redirect:c.config("redirect"),redirect_text:c.config("redirect_text"),page_count:c.config("page_count"),page_size:c.config("page_size")};c.$con.innerHTML=s(o),c.page=i===-1?o.data[o.data.length-1].page:o.data[0].page,void 0!==a&&(c.page=o.data[a].page),c.setCur(c.page)},setCur:function(e){for(var t=this.$con.getElementsByTagName("li"),n=0,i=t.length;n<i;n++)m(t[n],"cur"),t[n].getAttribute("data-page")==e&&_(t[n],"cur")},handler:{next:function(){var e=this,t=e.fire("nextClick",e.page);if(void 0===t||t===!0){for(var n,i=e.config("page_count"),r=e.config("page_size"),a=e.$con.getElementsByTagName("li"),c=0,s=a.length;c<s;c++)a[c].className.indexOf("page")!==-1&&(n=a[c]);var o=0|n.getAttribute("data-page");if(o>=i)return;e.render(o+1,o+r+1),e.fire("nextClicked",e.page),e.fire("pageClicked",e.page)}},prev:function(){var e=this,t=e.fire("prevClick",e.page);if(void 0===t||t===!0){var n=(e.config("page_count"),e.config("page_size"));if(e.page<=1)return;for(var i,r=e.$con.getElementsByTagName("li"),a=0,c=r.length;a<c;a++)if(r[a].className.indexOf("page")!==-1){i=r[a];break}var s=0|i.getAttribute("data-page");e.render(s-n,s,-1),e.fire("prevClicked",e.page),e.fire("pageClicked",e.page)}},page:function(e){var t=this,n=e.target,i=0|n.getAttribute("data-page");if(i!==t.page){var r=this.fire("pageClick");void 0!==r&&r!==!0||(t.page=i,t.setCur(t.page),t.fire("pageClicked",t.page))}},redirect:function(e,t){var n=this,i=parseInt(n.$con.getElementsByTagName("input")[0].value);if(!(!i||i<1||i>n.config("page_count")||i===n.page)){var r=n.fire("redirect",n.page);if(void 0===r||r===!0){for(var a,c=(n.config("page_count"),n.config("page_size")),s=n.$con.getElementsByTagName("li"),o=0,u=s.length;o<u;o++)if(s[o].getAttribute("data-page")==i){a=s[o];break}if(a)n.page=i,n.setCur(n.page);else{var g,f=i%c;0===f&&(f=c),f-=1,g=i-f,n.render(g,g+c,0,f)}n.fire("redirected",n.page),n.fire("pageClicked",n.page)}}}}},x});